<div class="admin-profile-container">
  <!-- Back Navigation -->
  <div class="back-nav">
    <button mat-button (click)="goBack()" class="back-button">
      <mat-icon>arrow_back</mat-icon> Back to Dashboard
    </button>
  </div>

  <!-- Profile Card -->
  <div class="profile-card">
    <!-- Profile Header -->
    <div class="profile-header">
      <div class="profile-avatar">
        <i class="fas fa-user-shield"></i>
      </div>
      <div class="profile-info">
        <h1>{{ adminName }}</h1>
        <p class="admin-role">System Administrator</p>
        <p class="admin-email">{{ adminEmail }}</p>
      </div>
    </div>

    <!-- Profile Content -->
    <div class="profile-content">
      <!-- Admin Information Section -->
      <mat-card class="info-section">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>person</mat-icon>
            Admin Information
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="info-grid">
            <div class="info-item">
              <label>Name:</label>
              <span>{{ adminName }}</span>
            </div>
            <div class="info-item">
              <label>Email:</label>
              <span>{{ adminEmail }}</span>
            </div>
            <div class="info-item">
              <label>Role:</label>
              <span>Administrator</span>
            </div>
            <div class="info-item">
              <label>Status:</label>
              <span class="status-badge active">Active</span>
            </div>
          </div>
        </mat-card-content>
      </mat-card>

      <!-- Change Password Section -->
      <mat-card class="password-section">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>lock</mat-icon>
            Security Settings
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <!-- Toggle Button -->
          <div class="change-password-toggle">
            <button mat-raised-button color="primary" (click)="toggleChangePassword()">
              <mat-icon>vpn_key</mat-icon>
              {{ showChangePassword ? 'Cancel' : 'Change Password' }}
            </button>
          </div>

          <!-- Change Password Form -->
          <div class="change-password-form" *ngIf="showChangePassword">
            <!-- Success Message -->
            <div class="alert alert-success" *ngIf="successMessage">
              {{ successMessage }}
            </div>

            <!-- Error Message -->
            <div class="alert alert-error" *ngIf="errorMessage">
              {{ errorMessage }}
            </div>

            <!-- Form Fields -->
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>Current Password</mat-label>
              <input 
                matInput 
                [(ngModel)]="currentPassword" 
                type="password"
                name="currentPassword"
                placeholder="Enter your current password"
              >
              <mat-icon matPrefix>lock</mat-icon>
              <mat-hint>Enter your current password for verification</mat-hint>
            </mat-form-field>

            <mat-form-field appearance="outline" class="form-field">
              <mat-label>New Password</mat-label>
              <input 
                matInput 
                [(ngModel)]="newPassword" 
                type="password"
                name="newPassword"
                placeholder="Enter new password"
                (ngModelChange)="onNewPasswordChange()"
              >
              <mat-icon matPrefix>vpn_key</mat-icon>
              <mat-hint>Use a strong password</mat-hint>
            </mat-form-field>

            <div class="password-strength" *ngIf="newPassword">
              <div class="strength-label" [class.strong]="passwordStrengthLabel === 'Strong'" [class.medium]="passwordStrengthLabel === 'Medium'" [class.weak]="passwordStrengthLabel === 'Weak'">
                Strength: {{ passwordStrengthLabel }}
              </div>
              <ul class="strength-issues" *ngIf="passwordStrengthIssues.length">
                <li *ngFor="let issue of passwordStrengthIssues">{{ issue }}</li>
              </ul>
            </div>

            <mat-form-field appearance="outline" class="form-field">
              <mat-label>Confirm New Password</mat-label>
              <input 
                matInput 
                [(ngModel)]="confirmPassword" 
                type="password"
                name="confirmPassword"
                placeholder="Re-enter new password"
              >
              <mat-icon matPrefix>check_circle</mat-icon>
              <mat-hint>Must match new password</mat-hint>
            </mat-form-field>

            <!-- Form Actions -->
            <div class="form-actions">
              <button 
                mat-raised-button 
                color="accent"
                (click)="changePassword()"
                [disabled]="!canSubmitPasswordChange()"
              >
                <mat-icon *ngIf="!isLoading">save</mat-icon>
                <mat-spinner *ngIf="isLoading" diameter="20"></mat-spinner>
                {{ isLoading ? 'Updating...' : 'Update Password' }}
              </button>
              <button 
                mat-stroked-button 
                (click)="toggleChangePassword()"
              >
                <mat-icon>close</mat-icon> Cancel
              </button>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
