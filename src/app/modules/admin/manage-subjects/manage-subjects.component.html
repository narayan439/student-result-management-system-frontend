<div class="manage-subjects-container">
  <!-- Header Section -->
  <div class="page-header">
    <div class="header-left">
      <h1 class="page-title">Manage Subjects</h1>
      <p class="page-subtitle">Add, view, and manage all subjects in the system</p>
    </div>
  </div>

  <!-- Main Card -->
  <div class="subjects-card">
    <!-- Card Header -->
    <div class="card-header">
      <h2>All Subjects</h2>
      <div class="subject-count">
        <span class="count-badge">{{activeSubjectsCount}} Active Subjects</span>
        <button 
          mat-icon-button 
          (click)="toggleShowDeletedSubjects()"
          [color]="showDeletedSubjects ? 'warn' : 'primary'"
          matTooltip="Show/Hide Deleted Subjects"
        >
          <mat-icon>{{ showDeletedSubjects ? 'visibility' : 'visibility_off' }}</mat-icon>
        </button>
      </div>
    </div>

    <!-- Add Subject Form -->
    <div class="add-form">
      <div class="form-fields">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Subject Code</mat-label>
          <input 
            matInput 
            [(ngModel)]="newSubjectCode" 
            name="subjectCode"
            placeholder="e.g., MTH, SCI, ENG"
            maxlength="10"
          >
          <mat-icon matPrefix>badge</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Subject Name</mat-label>
          <input 
            matInput 
            [(ngModel)]="newSubjectName" 
            name="subjectName"
            placeholder="e.g., Mathematics, Science, English"
          >
          <mat-icon matPrefix>add_circle</mat-icon>
        </mat-form-field>
      </div>

      <button 
        mat-raised-button 
        color="primary" 
        (click)="addSubject()"
        class="add-btn"
      >
        <mat-icon>add</mat-icon> Add Subject
      </button>
    </div>

    <!-- Subjects Table -->
    <div class="table-container">
      <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
        
        <!-- Subject Code Column -->
        <ng-container matColumnDef="code">
          <th mat-header-cell *matHeaderCellDef> Code </th>
          <td mat-cell *matCellDef="let subject">
            <div class="code-badge">
              {{ subject.code }}
            </div>
          </td>
        </ng-container>

        <!-- Subject Name Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef> Subject Name </th>
          <td mat-cell *matCellDef="let subject">
            <div class="subject-badge">
              <mat-icon class="subject-icon">book</mat-icon>
              {{ subject.subjectName }}
            </div>
          </td>
        </ng-container>

        <!-- Actions Column -->
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef class="actions-header"> Actions </th>
          <td mat-cell *matCellDef="let subject">
            <ng-container *ngIf="subject.isActive !== false; else deletedActions">
              <button 
                mat-button 
                color="warn" 
                (click)="deleteSubject(subject)"
                class="delete-btn"
              >
                <mat-icon>delete</mat-icon> Delete
              </button>
            </ng-container>
            <ng-template #deletedActions>
              <button 
                mat-button 
                color="accent" 
                (click)="reactivateSubject(subject)"
                class="restore-btn"
              >
                <mat-icon>restore</mat-icon> Reactivate
              </button>
            </ng-template>
          </td>
        </ng-container>

        <!-- Header Row -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        
        <!-- Data Rows -->
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

        <!-- Empty State -->
        <tr *ngIf="dataSource.data.length === 0" class="empty-row">
          <td colspan="3">
            <div class="empty-state">
              <mat-icon>book</mat-icon>
              <h3>No Subjects Added Yet</h3>
              <p>Add your first subject using the form above</p>
            </div>
          </td>
        </tr>

      </table>
      <mat-paginator 
        [pageSizeOptions]="[5, 10, 15, 20]" 
        showFirstLastButtons
        (page)="onPageChange($event)">
      </mat-paginator>
    </div>
  </div>
</div>