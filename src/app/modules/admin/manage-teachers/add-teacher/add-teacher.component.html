<div class="add-teacher-container">
  <!-- Back Navigation -->
  <div class="back-nav">
    <button mat-button routerLink="/admin/manage-teachers" class="back-button">
      <mat-icon>arrow_back</mat-icon> Back to Teachers
    </button>
  </div>

  <!-- Main Card -->
  <div class="form-card">
    <!-- Form Header -->
    <div class="form-header">
      <div class="header-icon">
        <mat-icon>school</mat-icon>
      </div>
      <div class="header-text">
        <h1>Add New Teacher</h1>
        <p>Fill in the teacher details below to add a new faculty member</p>
      </div>
    </div>

    <!-- Form Content -->
    <form (ngSubmit)="createTeacher()" #teacherForm="ngForm" class="teacher-form">
      <div class="form-grid">
        <!-- Name Field -->
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Full Name</mat-label>
          <input 
            matInput 
            [(ngModel)]="teacher.name" 
            name="name" 
            required
            placeholder="Enter teacher's full name"
          >
          <mat-icon matPrefix>person</mat-icon>
          <mat-hint>Enter the teacher's complete name</mat-hint>
          <mat-error *ngIf="teacherForm.controls['name']?.invalid && teacherForm.controls['name']?.touched">
            Name is required
          </mat-error>
        </mat-form-field>

        <!-- Email Field -->
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Email Address</mat-label>
          <input 
            matInput 
            [(ngModel)]="teacher.email" 
            name="email" 
            required
            email
            placeholder="teacher@school.com"
            type="email"
          >
          <mat-icon matPrefix>email</mat-icon>
          <mat-hint>Official school email address</mat-hint>
          <mat-error *ngIf="teacherForm.controls['email']?.invalid && teacherForm.controls['email']?.touched">
            Please enter a valid email address
          </mat-error>
        </mat-form-field>

        <!-- Subjects Field - Multiple Selection -->
        <div class="form-field full-width">
          <label class="subjects-label">
            <mat-icon>book</mat-icon>
            Teaching Subjects (Select at least one)
          </label>
          <div class="subjects-grid">
            <mat-checkbox 
              *ngFor="let subject of availableSubjects"
              (change)="toggleSubject(subject)"
              [checked]="isSubjectSelected(subject)"
              class="subject-checkbox"
            >
              {{ subject }}
            </mat-checkbox>
          </div>
          <mat-hint *ngIf="teacher.subjects.length === 0" class="error-hint">
            Please select at least one subject
          </mat-hint>
          <div *ngIf="teacher.subjects.length > 0" class="selected-subjects">
            <mat-chip-set aria-label="Selected Subjects">
              <mat-chip *ngFor="let subject of teacher.subjects" removable (removed)="toggleSubject(subject)">
                {{ subject }}
                <mat-icon matChipRemove>cancel</mat-icon>
              </mat-chip>
            </mat-chip-set>
          </div>
        </div>

        <!-- Phone Number Field -->
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Phone Number</mat-label>
          <input 
            matInput 
            [(ngModel)]="teacher.phone" 
            name="phone"
            (ngModelChange)="generatePasswordPreview()"
            placeholder="+91 9876543210"
          >
          <mat-icon matPrefix>phone</mat-icon>
          <mat-hint>Contact number (optional)</mat-hint>
        </mat-form-field>

        <!-- Auto-Generated Password Preview -->
        <div class="form-field full-width password-preview" *ngIf="generatedPassword">
          <div class="password-info-box">
            <div class="password-header">
              <mat-icon>vpn_key</mat-icon>
              <strong>Auto-Generated Login Password</strong>
            </div>
            <div class="password-format-info">
              <p><strong>Format:</strong> First 3 letters of name (UPPERCASE) + Last 4 digits of phone</p>
              <p><strong>Example:</strong> Name "Sharma" + Phone "9876543210" = <code>SHA3210</code></p>
            </div>
            <div class="password-display">
              <span class="label">Generated Password:</span>
              <span class="password-value">{{ generatedPassword }}</span>
              <button type="button" mat-icon-button matTooltip="Copy password" (click)="copyToClipboard(generatedPassword)">
                <mat-icon>content_copy</mat-icon>
              </button>
            </div>
            <p class="password-note">⚠️ Share this password with the teacher. It will be automatically stored during registration.</p>
          </div>
        </div>

        <!-- Experience Field -->
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Experience (Years)</mat-label>
          <input 
            matInput 
            [(ngModel)]="teacher.experience" 
            name="experience"
            type="number"
            min="0"
            placeholder="e.g., 5"
          >
          <mat-icon matPrefix>work</mat-icon>
          <mat-hint>Teaching experience in years (optional)</mat-hint>
        </mat-form-field>
      </div>

      <!-- Form Actions -->
      <div class="form-actions">
        <button 
          mat-stroked-button 
          type="button" 
          routerLink="/admin/manage-teachers"
          class="cancel-btn"
        >
          Cancel
        </button>
        
        <button 
          mat-raised-button 
          color="primary" 
          type="submit"
          [disabled]="teacherForm.invalid || teacher.subjects.length === 0"
          class="submit-btn"
        >
          <mat-icon>person_add</mat-icon> 
          Add Teacher
        </button>
      </div>
    </form>
  </div>

  <!-- Info Card -->
  <div class="info-card">
    <div class="info-icon">
      <mat-icon>info</mat-icon>
    </div>
    <div class="info-content">
      <h3>Teacher Information Guidelines</h3>
      <ul>
        <li>Use official school email address for communication</li>
        <li>Select the subjects the teacher will be teaching</li>
        <li>Ensure date of birth is accurate for age verification</li>
        <li>Teacher will receive login credentials via email</li>
        <li>Teachers can teach multiple subjects</li>
      </ul>
    </div>
  </div>
</div>