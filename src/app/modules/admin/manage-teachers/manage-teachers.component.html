<div class="manage-teachers-container">
  <!-- Header Section -->
  <div class="page-header">
    <div class="header-left">
      <h1 class="page-title">Teacher Management</h1>
      <p class="page-subtitle">Manage all teacher records, subjects, and information</p>
    </div>
    <div class="header-right">
      <button 
        mat-raised-button 
        color="primary" 
        routerLink="/admin/manage-teachers/add"
        class="add-button"
      >
        <mat-icon>person_add</mat-icon> Add New Teacher
      </button>
    </div>
  </div>

  <!-- Stats Cards -->
  <div class="stats-container">
    <div class="stat-card">
      <div class="stat-icon" style="background: #e3f2fd;">
        <mat-icon style="color: #1976d2;">groups</mat-icon>
      </div>
      <div class="stat-content">
        <h3>{{teachers.length}}</h3>
        <p>Total Teachers</p>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon" style="background: #f3e5f5;">
        <mat-icon style="color: #7b1fa2;">subject</mat-icon>
      </div>
      <div class="stat-content">
        <h3>{{getUniqueSubjects().length}}</h3>
        <p>Subjects Taught</p>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon" style="background: #e8f5e9;">
        <mat-icon style="color: #388e3c;">verified</mat-icon>
      </div>
      <div class="stat-content">
        <h3>100%</h3>
        <p>Active Staff</p>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon" style="background: #fff3e0;">
        <mat-icon style="color: #f57c00;">schedule</mat-icon>
      </div>
      <div class="stat-content">
        <h3>{{getAverageExperience()}} yrs</h3>
        <p>Avg. Experience</p>
      </div>
    </div>
  </div>

  <!-- Table Container -->
  <div class="table-card">
    <div class="table-header">
      <h2 class="table-title">All Teachers</h2>
      <div class="table-controls">
        <mat-form-field appearance="outline" class="search-field">
          <mat-label>Search teachers...</mat-label>
          <input matInput placeholder="Search by name, email, or subject">
          <mat-icon matSuffix>search</mat-icon>
        </mat-form-field>
        
        <mat-form-field appearance="outline" class="filter-field">
          <mat-label>Filter by Subject</mat-label>
          <mat-select>
            <mat-option value="all">All Subjects</mat-option>
            <mat-option *ngFor="let subject of getUniqueSubjects()" [value]="subject">
              {{subject}}
            </mat-option>
          </mat-select>
          <mat-icon matSuffix>filter_list</mat-icon>
        </mat-form-field>
      </div>
    </div>

    <!-- Angular Material Table -->
    <div class="table-responsive">
      <table mat-table [dataSource]="teachers" class="teachers-table">
        
        <!-- Name Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef class="table-header-cell">
            <div class="column-header">
              <mat-icon>person</mat-icon>
              <span>Teacher Name</span>
            </div>
          </th>
          <td mat-cell *matCellDef="let teacher" class="table-cell">
            <div class="teacher-info">
              <div class="avatar" [style.background]="getAvatarColor(teacher.name)">
                {{teacher.name.charAt(0)}}
              </div>
              <div>
                <div class="teacher-name">{{ teacher.name }}</div>
                <div class="teacher-email">{{ teacher.email }}</div>
              </div>
            </div>
          </td>
        </ng-container>

        <!-- Subject Column -->
        <ng-container matColumnDef="subject">
          <th mat-header-cell *matHeaderCellDef class="table-header-cell">
            <div class="column-header">
              <mat-icon>subject</mat-icon>
              <span>Subject</span>
            </div>
          </th>
          <td mat-cell *matCellDef="let teacher" class="table-cell">
            <div class="subject-cell">
              <div class="subject-badge" [style.background]="getSubjectColor(teacher.subject)">
                <mat-icon class="subject-icon">book</mat-icon>
                {{ teacher.subject }}
              </div>
            </div>
          </td>
        </ng-container>

        <!-- Email Column -->
        <ng-container matColumnDef="email">
          <th mat-header-cell *matHeaderCellDef class="table-header-cell">
            <div class="column-header">
              <mat-icon>email</mat-icon>
              <span>Contact</span>
            </div>
          </th>
          <td mat-cell *matCellDef="let teacher" class="table-cell">
            <div class="contact-info">
              <div class="contact-item">
                <mat-icon>mail_outline</mat-icon>
                <span>{{ teacher.email }}</span>
              </div>
              <div class="contact-item">
                <mat-icon>phone</mat-icon>
                <span>{{ getTeacherPhone(teacher.email) || 'Not provided' }}</span>
              </div>
            </div>
          </td>
        </ng-container>

        <!-- DOB Column -->
        <ng-container matColumnDef="dob">
          <th mat-header-cell *matHeaderCellDef class="table-header-cell">
            <div class="column-header">
              <mat-icon>cake</mat-icon>
              <span>Date of Birth</span>
            </div>
          </th>
          <td mat-cell *matCellDef="let teacher" class="table-cell">
            <div class="dob-cell">
              <div class="dob-date">{{ formatDate(teacher.dob) }}</div>
              <div class="dob-age">Age: {{ calculateAge(teacher.dob) }}</div>
            </div>
          </td>
        </ng-container>

        <!-- Actions Column -->
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef class="table-header-cell actions-header">
            <div class="column-header">
              <mat-icon>settings</mat-icon>
              <span>Actions</span>
            </div>
          </th>
          <td mat-cell *matCellDef="let teacher" class="table-cell actions-cell">
            <div class="action-buttons">
              <button
                mat-mini-fab
                color="primary"
                [routerLink]="['/admin/manage-teachers/edit', teacher.email]"
                matTooltip="Edit Teacher"
                class="action-btn edit-btn"
              >
                <mat-icon>edit</mat-icon>
              </button>
              
              <button 
                mat-mini-fab
                color="accent"
                matTooltip="View Profile"
                class="action-btn view-btn"
              >
                <mat-icon>visibility</mat-icon>
              </button>

              <button 
                mat-mini-fab
                color="warn"
                (click)="deleteTeacher(teacher.email)"
                matTooltip="Delete Teacher"
                class="action-btn delete-btn"
              >
                <mat-icon>delete</mat-icon>
              </button>
            </div>
          </td>
        </ng-container>

        <!-- Header Row -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns" class="table-header-row"></tr>
        
        <!-- Data Rows -->
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="table-row"></tr>

      </table>
    </div>

    <!-- Table Footer -->
    <div class="table-footer">
      <div class="footer-left">
        <span class="showing-text">Showing {{teachers.length}} of {{teachers.length}} teachers</span>
      </div>
      <div class="footer-right">
        <mat-paginator [pageSizeOptions]="[5, 10, 25]" showFirstLastButtons></mat-paginator>
      </div>
    </div>
  </div>
</div>