<div class="manage-teachers-container">
  <!-- Header Section -->
  <div class="page-header">
    <div class="header-left">
      <h1 class="page-title">Teacher Management</h1>
      <p class="page-subtitle">Manage all teacher records, subjects, and information</p>
    </div>
    <div class="header-right">
      <button 
        mat-raised-button 
        color="primary" 
        routerLink="/admin/manage-teachers/add"
        class="add-button"
      >
        <mat-icon>person_add</mat-icon> Add New Teacher
      </button>
    </div>
  </div>

  <!-- Stats Cards -->
  <div class="stats-container">
    <div class="stat-card">
      <div class="stat-icon" style="background: #e3f2fd;">
        <mat-icon style="color: #1976d2;">groups</mat-icon>
      </div>
      <div class="stat-content">
        <h3>{{teachers.length}}</h3>
        <p>Total Teachers</p>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon" style="background: #f3e5f5;">
        <mat-icon style="color: #7b1fa2;">subject</mat-icon>
      </div>
      <div class="stat-content">
        <h3>{{getUniqueSubjects().length}}</h3>
        <p>Subjects Taught</p>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon" style="background: #e8f5e9;">
        <mat-icon style="color: #388e3c;">verified</mat-icon>
      </div>
      <div class="stat-content">
        <h3>100%</h3>
        <p>Active Staff</p>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon" style="background: #fff3e0;">
        <mat-icon style="color: #f57c00;">schedule</mat-icon>
      </div>
      <div class="stat-content">
        <h3>{{getAverageExperience()}} yrs</h3>
        <p>Avg. Experience</p>
      </div>
    </div>
  </div>

  <!-- Table Container -->
  <div class="table-card">
    <div class="table-header">
      <h2 class="table-title">All Teachers</h2>
      <div class="table-controls">
        <mat-form-field appearance="outline" class="search-field">
          <mat-label>Search teachers...</mat-label>
          <input 
            matInput 
            placeholder="Search by name, email, or subject"
            (input)="onSearch($any($event).target.value)"
          >
          <mat-icon matSuffix>search</mat-icon>
        </mat-form-field>
        
        <mat-form-field appearance="outline" class="filter-field">
          <mat-label>Filter by Subject</mat-label>
          <mat-select 
            [(value)]="selectedSubject"
            (selectionChange)="onSubjectFilter($event.value)"
          >
            <mat-option value="all">All Subjects</mat-option>
            <mat-divider></mat-divider>
            <mat-option *ngFor="let subject of allSubjects" [value]="subject">
              {{subject}}
            </mat-option>
          </mat-select>
          <mat-icon matSuffix>filter_list</mat-icon>
        </mat-form-field>
      </div>
    </div>

    <!-- Angular Material Table -->
    <div class="table-responsive">
      <table mat-table [dataSource]="dataSource" class="teachers-table">
        
        <!-- Name Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef class="table-header-cell">
            <div class="column-header">
              <mat-icon>person</mat-icon>
              <span>Teacher Name</span>
            </div>
          </th>
          <td mat-cell *matCellDef="let teacher" class="table-cell">
            <div class="teacher-info">
              <div class="avatar" [style.background]="getAvatarColor(teacher.name)">
                {{teacher.name.charAt(0)}}
              </div>
              <div>
                <div class="teacher-name">{{ teacher.name }}</div>
                <div class="teacher-email">{{ teacher.email }}</div>
              </div>
            </div>
          </td>
        </ng-container>

        <!-- Email Column -->
        <ng-container matColumnDef="email">
          <th mat-header-cell *matHeaderCellDef class="table-header-cell">
            <div class="column-header">
              <mat-icon>email</mat-icon>
              <span>Email</span>
            </div>
          </th>
          <td mat-cell *matCellDef="let teacher" class="table-cell">
            <div class="email-cell">
              <mat-icon class="email-icon">mail_outline</mat-icon>
              <span>{{ teacher.email }}</span>
            </div>
          </td>
        </ng-container>

        <!-- Phone Column -->
        <ng-container matColumnDef="phone">
          <th mat-header-cell *matHeaderCellDef class="table-header-cell">
            <div class="column-header">
              <mat-icon>phone</mat-icon>
              <span>Phone</span>
            </div>
          </th>
          <td mat-cell *matCellDef="let teacher" class="table-cell">
            <div class="phone-cell">
              <mat-icon class="phone-icon">call</mat-icon>
              <span>{{ teacher.phone || 'Not provided' }}</span>
            </div>
          </td>
        </ng-container>

        <!-- Subjects Column (Multiple) -->
        <ng-container matColumnDef="subjects">
          <th mat-header-cell *matHeaderCellDef class="table-header-cell">
            <div class="column-header">
              <mat-icon>subject</mat-icon>
              <span>Subjects</span>
            </div>
          </th>
          <td mat-cell *matCellDef="let teacher" class="table-cell">
            <div class="subjects-cell">
              <div *ngIf="teacher.subjects && teacher.subjects.length > 0; else noSubjects" class="subject-list">
                <span *ngFor="let subject of teacher.subjects" class="subject-badge" [style.background]="getSubjectColor(subject)">
                  {{ subject }}
                </span>
              </div>
              <ng-template #noSubjects>
                <span class="no-subjects">No subjects</span>
              </ng-template>
            </div>
          </td>
        </ng-container>

        <!-- Experience Column -->
        <ng-container matColumnDef="experience">
          <th mat-header-cell *matHeaderCellDef class="table-header-cell">
            <div class="column-header">
              <mat-icon>work</mat-icon>
              <span>Experience</span>
            </div>
          </th>
          <td mat-cell *matCellDef="let teacher" class="table-cell">
            <div class="experience-cell">
              <span class="experience-badge">{{ teacher.experience || 0 }} years</span>
            </div>
          </td>
        </ng-container>

        <!-- Actions Column -->
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef class="table-header-cell actions-header">
            <div class="column-header">
              <mat-icon>settings</mat-icon>
              <span>Actions</span>
            </div>
          </th>
          <td mat-cell *matCellDef="let teacher" class="table-cell actions-cell">
            <div class="action-buttons">
              <button
                mat-mini-fab
                color="primary"
                [routerLink]="['/admin/manage-teachers/edit', teacher.email]"
                matTooltip="Edit Teacher"
                class="action-btn edit-btn"
              >
                <mat-icon>edit</mat-icon>
              </button>
              
              <button 
                mat-mini-fab
                color="warn"
                (click)="deleteTeacher(teacher.teacherId)"
                matTooltip="Delete Teacher"
                class="action-btn delete-btn"
              >
                <mat-icon>delete</mat-icon>
              </button>
            </div>
          </td>
        </ng-container>

        <!-- Header Row -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns" class="table-header-row"></tr>
        
        <!-- Data Rows -->
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="table-row"></tr>

        <!-- No data row -->
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" [attr.colspan]="displayedColumns.length">
            <div class="no-data-message">
              <mat-icon>person_off</mat-icon>
              <p>No teachers found</p>
            </div>
          </td>
        </tr>

      </table>
    </div>

    <!-- Table Footer -->
    <div class="table-footer">
      <div class="footer-left">
        <span class="showing-text">Showing {{dataSource.filteredData.length}} of {{teachers.length}} teachers</span>
      </div>
      <div class="footer-right">
        <mat-paginator 
          [pageSizeOptions]="[5, 10, 25]" 
          showFirstLastButtons
          [length]="dataSource.filteredData.length"
          [pageSize]="10">
        </mat-paginator>
      </div>
    </div>
  </div>
</div>