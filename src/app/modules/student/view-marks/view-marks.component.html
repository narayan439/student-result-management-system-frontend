<div class="view-marks-container">
  
  <!-- Header -->
  <div class="marks-header">
    <h2>My Academic Marks</h2>
    <p>View your subject-wise marks and overall performance</p>
  </div>

  <!-- Marks Card -->
  <mat-card class="marks-card">
    
    <!-- Marks Header Section -->
    <div class="marks-header-section">
      <div class="student-info">
        <h3>{{ studentName }}</h3>
        <p>Class {{ studentClass }} | Roll No: {{ studentRollNo }}</p>
      </div>
      <div class="exam-badge">
        <mat-icon>school</mat-icon>
        Annual Examination 2023
      </div>
    </div>

    <!-- Marks Content -->
    <div class="marks-content">
      
      <!-- Marks Table with Angular Material -->
      <div class="marks-table-container">
        <table mat-table [dataSource]="marks" class="mat-elevation-z1">
          
          <!-- Subject Column -->
          <ng-container matColumnDef="subject">
            <th mat-header-cell *matHeaderCellDef>Subject</th>
            <td mat-cell *matCellDef="let m" class="subject-cell">
              <div class="subject-info">
                <mat-icon class="subject-icon">book</mat-icon>
                {{ m.subject }}
              </div>
            </td>
          </ng-container>

          <!-- Marks Column -->
          <ng-container matColumnDef="score">
            <th mat-header-cell *matHeaderCellDef class="marks-header">Marks</th>
            <td mat-cell *matCellDef="let m" class="marks-cell">
              <div class="marks-display">
                <span class="score-number">{{ m.score }}</span>
                <span class="score-total">/100</span>
              </div>
            </td>
          </ng-container>

          <!-- Status Column -->
          <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef class="status-header">Status</th>
            <td mat-cell *matCellDef="let m" class="status-cell">
              <mat-chip-listbox>
                <mat-chip 
                  [class]="m.score >= 33 ? 'pass-chip' : 'fail-chip'"
                  [ngClass]="m.score >= 33 ? 'pass-chip' : 'fail-chip'"
                >
                  <mat-icon class="chip-icon">
                    {{ m.score >= 33 ? 'check_circle' : 'cancel' }}
                  </mat-icon>
                  {{ m.score >= 33 ? 'Pass' : 'Fail' }}
                </mat-chip>
              </mat-chip-listbox>
            </td>
          </ng-container>

          <!-- Header Row -->
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          
          <!-- Data Rows -->
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

        </table>
      </div>

    </div>
  </mat-card>

  <!-- Summary Section -->
  <mat-card class="summary-section">
    
    <h3 class="summary-header">
      <mat-icon>analytics</mat-icon>
      Performance Summary
    </h3>
    
    <div class="summary-grid">
      
      <!-- Total Marks -->
      <mat-card class="summary-card">
        <mat-card-content>
          <h4 class="summary-value">{{ total }}</h4>
          <p class="summary-label">
            <mat-icon>summarize</mat-icon>
            Total Marks
          </p>
        </mat-card-content>
      </mat-card>
      
      <!-- Percentage -->
      <mat-card class="summary-card">
        <mat-card-content>
          <h4 class="summary-value">{{ percentage }}%</h4>
          <p class="summary-label">
            <mat-icon>percent</mat-icon>
            Percentage
          </p>
        </mat-card-content>
      </mat-card>
      
      <!-- Grade -->
      <mat-card class="summary-card">
        <mat-card-content>
          <h4 class="summary-value">{{ grade }}</h4>
          <p class="summary-label">
            <mat-icon>grade</mat-icon>
            Grade
          </p>
        </mat-card-content>
      </mat-card>
      
      <!-- Average -->
      <mat-card class="summary-card">
        <mat-card-content>
          <h4 class="summary-value">{{ average | number:'1.0-0' }}</h4>
          <p class="summary-label">
            <mat-icon>average</mat-icon>
            Average per Subject
          </p>
        </mat-card-content>
      </mat-card>
      
    </div>
    
    <!-- Overall Grade Badge -->
    <div class="overall-grade">
      <mat-chip class="grade-badge">
        <mat-icon>verified</mat-icon>
        Overall Grade: {{ grade }}
      </mat-chip>
    </div>
    
    <!-- Grade Legend -->
    <mat-card class="grade-legend">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>legend_toggle</mat-icon>
          Grade System
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="grade-grid">
          <mat-chip class="grade-item a-plus">
            <div class="grade-color"></div>
            A+ (90-100%)
          </mat-chip>
          <mat-chip class="grade-item a">
            <div class="grade-color"></div>
            A (80-89%)
          </mat-chip>
          <mat-chip class="grade-item b">
            <div class="grade-color"></div>
            B (70-79%)
          </mat-chip>
          <mat-chip class="grade-item c">
            <div class="grade-color"></div>
            C (60-69%)
          </mat-chip>
          <mat-chip class="grade-item d">
            <div class="grade-color"></div>
            D (33-59%)
          </mat-chip>
          <mat-chip class="grade-item f">
            <div class="grade-color"></div>
            F (Below 33%)
          </mat-chip>
        </div>
      </mat-card-content>
    </mat-card>
    
  </mat-card>

  <!-- Footer -->
  <div class="marks-footer">
    <p>Â© 2023 Delhi Public School. All rights reserved.</p>
    <p>Marks are provisional. Contact examination department for official marksheet.</p>
  </div>

</div>